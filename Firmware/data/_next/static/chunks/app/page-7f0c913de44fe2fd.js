(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4208:(e,t,l)=>{Promise.resolve().then(l.bind(l,10853))},10853:(e,t,l)=>{"use strict";l.d(t,{default:()=>N});var s=l(29159),a=l(64668),n=l(67826),i=l(7917),c=l(94784),r=l(48097),o=l(71375);function u(){let[e,t]=(0,o.useState)(""),[l,a]=(0,o.useState)("");return(0,o.useEffect)(()=>{fetch("/wifi").then(e=>e.json()).then(e=>{e.ssid&&e.password&&(t(e.ssid),a(e.password))})},[]),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center flex-wrap gap-4",children:[(0,s.jsxs)("p",{className:"px-3 text-start w-full",children:["保存WiFi可能导致设备重启，",(0,s.jsx)("span",{className:"block",children:"并丢失当前连接。"}),(0,s.jsx)("span",{className:"block",children:"如果无法连接到新的WiFi，"}),(0,s.jsx)("span",{className:"block",children:"设备将使用旧的WiFi。"})]}),(0,s.jsx)(r.r,{type:"text",label:"WIFI名称",value:e,onChange:function(e){console.log("SSID changed ",e.target.value),t(e.target.value)}}),(0,s.jsx)(r.r,{type:"text",label:"WIFI密码",value:l,onChange:function(e){a(e.target.value)}}),(0,s.jsx)(c.T,{color:"primary",variant:"ghost",className:"max-w-xs",onClick:function(){fetch("/setWiFi?ssid=".concat(encodeURIComponent(e),"&password=").concat(encodeURIComponent(l)),{method:"POST"})},children:"保存"})]})}var d=l(82065),x=l(6845),f=l(20108),h=l(91766);function m(){let[e,t]=(0,o.useState)(""),[l,a]=(0,o.useState)(""),[n,i]=(0,o.useState)(!1),[u,m]=(0,o.useState)(!1),[j,p]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{m(!0),fetch("/spawn").then(e=>e.json()).then(e=>{e.latitude&&e.longitude&&(t(e.latitude),a(e.longitude),i(!0))}).finally(()=>{m(!1)})},[]),(0,s.jsxs)("div",{className:"w-full flex flex-col items-center justify-center flex-wrap gap-4",children:[(0,s.jsx)("p",{className:"px-3 text-start w-full",children:"当获取到GPS信号时，指南针将指向此位置。"}),(0,s.jsx)(r.r,{type:"number",label:"Latitude",value:e,onChange:function(e){let s=e.target.value;t(s),i(""!==s&&""!==l),p(!1)}}),(0,s.jsx)(r.r,{type:"number",label:"Longitude",value:l,onChange:function(t){let l=t.target.value;a(l),i(""!==e&&""!==l),p(!1)}}),(0,s.jsxs)(d.y,{placement:"bottom",isOpen:j,children:[(0,s.jsx)(x.T,{children:(0,s.jsx)(c.T,{color:"primary",variant:"ghost",className:"max-w-xs w-full",onClick:function(){let t=parseFloat(e),s=parseFloat(l);t&&s&&t>=-90&&t<=90&&s>=-180&&s<=180?(console.log("Save ",t,s),p(!1),m(!0),fetch("/spawn?latitude=".concat(e,"&longitude=").concat(l),{method:"POST"}).finally(()=>{m(!1)})):(console.log("Please enter both latitude and longitude"),p(!0),setTimeout(()=>{p(!1)},2e3))},isDisabled:!n,children:u?(0,s.jsx)(h.o,{size:"sm",isIndeterminate:!0,"aria-label":"Loading...",className:"max-w-md"}):"Save"})}),(0,s.jsx)(f.C,{children:(0,s.jsxs)("div",{className:"px-1 py-2",children:[(0,s.jsx)("div",{className:"text-small font-bold",children:"Value Error"}),(0,s.jsx)("div",{className:"text-tiny",children:"Latitude and Longitude must be numbers between -90 and 90, and -180 and 180 respectively."})]})})]})]})}function j(){let[e,t]=(0,o.useState)({buildDate:"",buildTime:"",buildVersion:"",gitBranch:"",gitCommit:""}),l=e=>{let t=new Date(e),l=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return"".concat(l,"年").concat(s,"月").concat(a,"日")};return(0,o.useEffect)(()=>{fetch("/info").then(e=>e.json()).then(e=>{if(e){let s=l(e.buildDate);t({...e,buildDate:s})}})},[]),(0,s.jsx)("div",{children:(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:["版本: ",e.buildVersion]}),(0,s.jsxs)("li",{children:["分支: ",e.gitBranch]}),(0,s.jsxs)("li",{children:["提交: ",e.gitCommit]}),(0,s.jsxs)("li",{children:["构建时间: ",e.buildTime]}),(0,s.jsxs)("li",{children:["构建日期: ",e.buildDate]})]})})}var p=l(50690);function b(){let[e,t]=(0,o.useState)("#aabbcc"),[l,a]=(0,o.useState)("aabbcc"),[n,i]=(0,o.useState)(!0),u=function(e,t){let[l,s]=(0,o.useState)(e);return(0,o.useEffect)(()=>{let t=setTimeout(()=>{s(e)},200);return()=>{clearTimeout(t)}},[e,200]),l}(e,0);function d(e){return/^([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/.test(e)}return(0,o.useEffect)(()=>{console.log("Debounced:",u),fetch("/setColor?color=".concat(encodeURIComponent(u)),{method:"POST"})},[u]),(0,s.jsxs)("div",{className:"w-full flex flex-col items-center justify-center flex-wrap gap-4",children:[(0,s.jsx)(p.jI,{color:e,onChange:function(e){let l=e.replace("#","");a(l),d(l)?(t("#".concat(l)),i(!0)):i(!1)}}),(0,s.jsx)(r.r,{label:"输入颜色",labelPlacement:"outside",value:l,onChange:function(e){let l=e.target.value.replace("#","");a(l),d(l)?(t("#".concat(l)),i(!0)):i(!1)},placeholder:"请输入HEX颜色值",isInvalid:!n,startContent:(0,s.jsx)("div",{className:"pointer-events-none flex items-center",children:(0,s.jsx)("span",{className:"text-default-400 text-small",children:"#"})})}),(0,s.jsx)(c.T,{onPress:function(){n||alert("请输入合法的 HEX 颜色值，例如 aabbcc 或 abc")},disabled:!n,children:"确认颜色"})]})}let v={colors:"default",wifi:"success",spawn:"primary",info:"danger"};function g(e){let{activeTab:t,setActiveTab:l}=e;return(0,s.jsx)("div",{style:{zIndex:9999,position:"absolute",top:"91%",left:"47.3%",transform:"translateX(-50%)",width:"300px"},children:(0,s.jsxs)(a.r,{"aria-label":"Options",color:v[t],onSelectionChange:e=>l(e),children:[(0,s.jsx)(n.i,{title:(0,s.jsx)("div",{className:"flex items-center",children:"颜色"})},"colors"),(0,s.jsx)(n.i,{title:(0,s.jsx)("div",{className:"flex items-center",children:"WiFi"})},"wifi"),(0,s.jsx)(n.i,{title:(0,s.jsx)("div",{className:"flex items-center",children:"出生点"})},"spawn"),(0,s.jsx)(n.i,{title:(0,s.jsx)("div",{className:"flex items-center",children:"固件信息"})},"info")]})})}function w(e){let{activeTab:t}=e;return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center h-full",children:(()=>{switch(t){case"colors":return(0,s.jsx)(b,{});case"wifi":return(0,s.jsx)(u,{});case"spawn":return(0,s.jsx)(m,{});case"info":return(0,s.jsx)(j,{});default:return null}})()})}function N(){let[e,t]=(0,o.useState)("colors");return(0,s.jsxs)("div",{className:"flex flex-col -mt-16 w-full",style:{height:"calc(100vh - 190px)"},children:[(0,s.jsx)(i.Z,{className:"w-full max-w-8xl mx-auto h-full",children:(0,s.jsx)("div",{className:"w-72 m-auto",children:(0,s.jsx)(w,{activeTab:e})})}),(0,s.jsx)(g,{activeTab:e,setActiveTab:t})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[923,834,452,679,358],()=>t(4208)),_N_E=e.O()}]);